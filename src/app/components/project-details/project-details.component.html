
<h2>Project Details</h2>

<div *ngIf="project">
  <div>
    <h3>{{ project.name }}</h3>
    <p>{{ project.description }}</p>
  </div>

  <button (click)="toggleFunctionalityForm()">Create new functionality</button>

  <form *ngIf="showFunctionalityForm" (ngSubmit)="createFunctionality()">
    <h3>Create Functionality</h3>
    <label>
      Name:
      <input type="text" [(ngModel)]="newFunctionality.name" name="name" required>
    </label>
    <br>
    <label>
      Description:
      <textarea [(ngModel)]="newFunctionality.description" name="description" required></textarea>
    </label>
    <label>
      Priority:
      <select [(ngModel)]="newFunctionality.priority" name="priority" required>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
      </select>
    </label>
    <label>
      Owner:
      <input type="text" [(ngModel)]="newFunctionality.owner" name="owner" required>
    </label>
    <label>
      State:
      <select [(ngModel)]="newFunctionality.state" name="state" required>
        <option value="todo">Todo</option>
        <option value="doing">Doing</option>
        <option value="done">Done</option>
      </select>
    </label>
    <br>
    <button type="submit">Create</button>
  </form>

  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
        <th>Priority</th>
        <th>Owner</th>
        <th>State</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let functionality of functionalities">
        <td>{{ functionality.name }}</td>
        <td>{{ functionality.description }}</td>
        <td>{{ functionality.priority }}</td>
        <td>{{ functionality.owner }}</td>
        <td>{{ functionality.state }}</td>
        <td>
          <button (click)="editFunctionalityModal(functionality)">Edit</button>
          <button (click)="deleteFunctionality(project.id, functionality.id)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="showEditFunctionalityForm">
    <h3>Edit Functionality</h3>
    <form (ngSubmit)="saveEditedFunctionality()">
      <label>
        Name:
        <input type="text" [(ngModel)]="editFunctionality.name" name="name" required>
      </label>
      <br>
      <label>
        Description:
        <textarea [(ngModel)]="editFunctionality.description" name="description" required></textarea>
      </label>
      <label>
        Priority:
        <select [(ngModel)]="editFunctionality.priority" name="priority" required>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
          <option value="7">7</option>
          <option value="8">8</option>
          <option value="9">9</option>
          <option value="10">10</option>
        </select>
      </label>
      <label>
        Owner:
        <input type="text" [(ngModel)]="editFunctionality.owner" name="owner" required>
      </label>
      <label>
        State:
        <select [(ngModel)]="editFunctionality.state" name="state" required>
          <option value="todo">Todo</option>
          <option value="doing">Doing</option>
          <option value="done">Done</option>
        </select>
      </label>
      <br>
      <button type="submit">Save</button>
      <button type="button" (click)="cancelEditFunctionality()">Cancel</button>
    </form>
  </div>

  <button (click)="goBack()">Back to Projects</button>
</div>
